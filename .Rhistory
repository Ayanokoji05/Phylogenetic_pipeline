# Install CRAN packages
install.packages(c("ape", "ggplot2", "Cairo", "BiocManager"))

# Install Bioconductor packages
BiocManager::install("ggtree")

# Install ggtree's dependencies explicitly (optional but recommended)
BiocManager::install(c("treeio", "tidytree", "ggfun"))
# Check CRAN package installations
cran_packages <- c("ape", "ggplot2", "Cairo", "BiocManager")
cran_results <- sapply(cran_packages, function(pkg) {
  requireNamespace(pkg, quietly = TRUE)
})

# Check Bioconductor package installations
bioc_packages <- c("ggtree", "treeio", "tidytree", "ggfun")
bioc_results <- sapply(bioc_packages, function(pkg) {
  requireNamespace(pkg, quietly = TRUE)
})

# Print verification results
cat("CRAN Packages:\n")
print(cran_results)

cat("\nBioconductor Packages:\n")
print(bioc_results)

# Detailed version check
if (all(c(cran_results, bioc_results))) {
  cat("\nSUCCESS: All packages are installed correctly!\n")
  cat("\nPackage versions:\n")
  print(sessionInfo())
} else {
  cat("\nWARNING: Some packages failed to load. Missing packages:\n")
  print(names(which(!c(cran_results, bioc_results))))
}
q()
